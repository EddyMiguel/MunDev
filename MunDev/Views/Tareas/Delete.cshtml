@model MunDev.Models.Tarea

@{
    ViewData["Title"] = "Eliminar Tarea";
}

<h1 class="display-4 mb-4 text-danger">
    <i class="bi bi-trash"></i> @ViewData["Title"]
</h1>

<h3 class="mb-3">¿Estás seguro de que quieres eliminar esta tarea?</h3>
<p class="text-danger">¡Esta acción es irreversible!</p>
<hr />

<div class="card shadow-sm p-4 border-danger">
    <dl class="row">
        <dt class="col-sm-3">
            @Html.DisplayNameFor(model => model.Titulo)
        </dt>
        <dd class="col-sm-9">
            @Html.DisplayFor(model => model.Titulo)
        </dd>
        <dt class="col-sm-3">
            @Html.DisplayNameFor(model => model.Descripcion)
        </dt>
        <dd class="col-sm-9">
            @Html.DisplayFor(model => model.Descripcion)
        </dd>
        <dt class="col-sm-3">
            @Html.DisplayNameFor(model => model.FechaVencimiento)
        </dt>
        <dd class="col-sm-9">
            @Html.DisplayFor(model => model.FechaVencimiento)
        </dd>
        <dt class="col-sm-3">
            @Html.DisplayNameFor(model => model.EstadoTarea)
        </dt>
        <dd class="col-sm-9">
            @{
                string estadoBadgeClass = "";
                switch (Model.EstadoTarea)
                {
                    case "Completada":
                        estadoBadgeClass = "bg-success";
                        break;
                    case "En Progreso":
                        estadoBadgeClass = "bg-primary";
                        break;
                    case "Bloqueada":
                        estadoBadgeClass = "bg-danger";
                        break;
                    case "Pendiente":
                    default:
                        estadoBadgeClass = "bg-secondary";
                        break;
                }
            }
            <span class="badge @estadoBadgeClass">@Html.DisplayFor(model => model.EstadoTarea)</span>
        </dd>
        <dt class="col-sm-3">
            @Html.DisplayNameFor(model => model.Prioridad)
        </dt>
        <dd class="col-sm-9">
            @{
                string prioridadBadgeClass = "";
                switch (Model.Prioridad)
                {
                    case "Crítica":
                        prioridadBadgeClass = "bg-danger";
                        break;
                    case "Alta":
                        prioridadBadgeClass = "bg-warning text-dark";
                        break;
                    case "Media":
                        prioridadBadgeClass = "bg-info";
                        break;
                    case "Baja":
                    default:
                        prioridadBadgeClass = "bg-secondary";
                        break;
                }
            }
            <span class="badge @prioridadBadgeClass">@Html.DisplayFor(model => model.Prioridad)</span>
        </dd>
        <dt class="col-sm-3">
            @Html.DisplayNameFor(model => model.AsignadoAusuario)
        </dt>
        <dd class="col-sm-9">
            @Html.DisplayFor(model => model.AsignadoAusuario.NombreUsuario) @* Asumo NombreUsuario *!*@
        </dd>
        <dt class="col-sm-3">
            @Html.DisplayNameFor(model => model.Proyecto)
        </dt>
        <dd class="col-sm-9">
            @Html.DisplayFor(model => model.Proyecto.NombreProyecto) @* Asumo NombreProyecto *!*@
        </dd>
    </dl>

    <form asp-action="Delete">
        <input type="hidden" asp-for="TareaId" />
        <button type="submit" value="Delete" class="btn btn-danger">
            <i class="bi bi-trash-fill"></i> Confirmar Eliminación
        </button>
        <a asp-action="Index" class="btn btn-secondary ms-2">
            <i class="bi bi-arrow-left"></i> Cancelar y Volver a la Lista
        </a>
    </form>
</div>
